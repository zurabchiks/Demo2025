![PIC](https://github.com/zurabchiks/Demo2025/blob/main/RedOS/Pic/topology.png)

| Устройство | Операционная система                               | Пользователь/Пароль |
| ---------- | -------------------------------------------------- | ------------------- |
| ISP        | Redos, AltLinux, Astra, Rosa Linux                 | root/toor           |
| HQ-RTR     | Redos, AltLinux, Astra, Rosa Linux                 | student/P@$$word    |
| BR-RTR     | Redos, AltLinux, Astra, Rosa Linux                 | net_admin/P@$$word  |
| HQ-SRV     | Redos, AltLinux, Astra, Rosa Linux                 | sshuser/P@ssw0rd    |
| BR-SRV     | Redos, AltLinux, Astra, Rosa Linux                 | sshuser/P@ssw0rd    |
| HQ-CLI     | Redos GUI, AltLinux GUI, Astra GUI, Rosa Linux GUI | user/user           |

# Модуль 1. Настройка сетевой инфраструктуры

## Время на выполнение модуля: 1 час

1. **Базовая настройка устройств**

   - Настройте имена устройств согласно топологии. - Используйте полное доменное имя
   - IP-адрес должен быть из приватного диапазона, в случае, если сеть локальная, согласно RFC1918
   - Локальная сеть в сторону HQ-SRV(VLAN100) должна вмещать не более 64 адресов
   - Локальная сеть в сторону HQ-CLI(VLAN200) должна вмещать не более 16 адресов
   - Локальная сеть в сторону BR-SRV должна вмещать не более 32 адресов
   - Локальная сеть для управления(VLAN999) должна вмещать не более 8 адресов
   - Сведения об адресах занесите в отчёт, в качестве примера используйте Таблицу 3

2. **Настройка ISP**

   - Настройте адресацию на интерфейсах:
     - Интерфейс, подключенный к магистральному провайдеру, получает адрес по DHCP
     - Настройте маршруты по умолчанию там, где это необходимо
     - Интерфейс, к которому подключен HQ-RTR, подключен к сети 172.16.4.0/28
     - Интерфейс, к которому подключен BR-RTR, подключен к сети 172.16.5.0/28
     - На ISP настройте динамическую сетевую трансляцию в сторону HQ-RTR и BR-RTR для доступа к сети Интернет

3. **Создание локальных учетных записей**

   - Создайте пользователя sshuser на серверах HQ-SRV и BR-SRV
   - Пароль пользователя sshuser с паролем P@ssw0rd
   - Идентификатор пользователя 1010
   - Пользователь sshuser должен иметь возможность запускать sudo без дополнительной аутентификации.
   - Создайте пользователя net_admin на маршрутизаторах HQ-RTR и BR-RTR
     - Пароль пользователя net_admin с паролем P@$$word
     - При настройке на EcoRouter пользователь net_admin должен обладать максимальными привилегиями
     - При настройке ОС на базе Linux, запускать sudo без дополнительной аутентификации

4. **Настройте на интерфейсе HQ-RTR в сторону офиса HQ виртуальный коммутатор**

   - Сервер HQ-SRV должен находиться в ID VLAN 100
   - Клиент HQ-CLI в ID VLAN 200
   - Создайте подсеть управления с ID VLAN 999
   - Основные сведения о настройке коммутатора и выбора реализации разделения на VLAN занесите в отчёт

5. **Настройка безопасного удаленного доступа на серверах HQ-SRV и BR-SRV**

   - Для подключения используйте порт 2024
   - Разрешите подключения только пользователю sshuser
   - Ограничьте количество попыток входа до двух
   - Настройте баннер «Authorized access only»

6. **Между офисами HQ и BR необходимо сконфигурировать ip туннель**

   - Сведения о туннеле занесите в отчёт
   - На выбор технологии GRE или IP in IP

7. **Обеспечьте динамическую маршрутизацию: ресурсы одного офиса должны быть доступны из другого офиса**

   - Разрешите выбранный протокол только на интерфейсах в ip туннеле
   - Маршрутизаторы должны делиться маршрутами только друг с другом
   - Обеспечьте защиту выбранного протокола посредством парольной защиты
   - Сведения о настройке и защите протокола занесите в отчёт

8. **Настройка динамической трансляции адресов**

   - Настройте динамическую трансляцию адресов для обоих офисов.
   - Все устройства в офисах должны иметь доступ к сети Интернет

9. **Настройка протокола динамической конфигурации хостов**

   - Настройте нужную подсеть
   - Для офиса HQ в качестве сервера DHCP выступает маршрутизатор HQ-RTR.
   - Клиентом является машина HQ-CLI.
   - Исключите из выдачи адрес маршрутизатора
   - Адрес шлюза по умолчанию – адрес маршрутизатора HQ-RTR.
   - Адрес DNS-сервера для машины HQ-CLI – адрес сервера HQ-SRV.
   - DNS-суффикс для офисов HQ – au-team.irpo
   - Сведения о настройке протокола занесите в отчёт

10. **Настройка DNS для офисов HQ и BR**

    - Основной DNS-сервер реализован на HQ-SRV.
    - Сервер должен обеспечивать разрешение имён в сетевые адреса устройств и обратно в соответствии с таблицей 2
    - В качестве DNS сервера пересылки используйте любой общедоступный DNS сервер

11. **Настройте часовой пояс на всех устройствах, согласно месту проведения экзамена**

# Модуль 2. Организация сетевого администрирования операционных систем

## Время на выполнение модуля: 1 час

1. **Настройте доменный контроллер Samba на машине BR-SRV**

   - Создайте 5 пользователей для офиса HQ: имена пользователей формата user№.hq. Создайте группу hq, введите в эту группу созданных пользователей
   - Введите в домен машину HQ-CLI
   - Пользователи группы hq имеют право аутентифицироваться на клиентском ПК
   - Пользователи группы hq должны иметь возможность повышать привилегии для выполнения ограниченного набора команд: cat, grep, id. Запускать другие команды с повышенными привилегиями пользователи группы не имеют права
   - Выполните импорт пользователей из файла users.csv. Файл будет располагаться на виртуальной машине BR-SRV в папке /opt

2. **Сконфигурируйте файловое хранилище**

   - При помощи трёх дополнительных дисков, размером 1Гб каждый, на HQ-SRV сконфигурируйте дисковый массив уровня 5
   - Имя устройства – md0, конфигурация массива размещается в файле /etc/mdadm.conf
   - Обеспечьте автоматическое монтирование в папку /raid5
   - Создайте раздел, отформатируйте раздел, в качестве файловой системы используйте ext4
   - Настройте сервер сетевой файловой системы(nfs), в качестве папки общего доступа выберите /raid5/nfs, доступ для чтения и записи для всей сети в сторону HQ-CLI
   - На HQ-CLI настройте автомонтирование в папку /mnt/nfs
   - Основные параметры сервера отметьте в отчёте

3. **Настройте службу сетевого времени на базе сервиса chrony**

   - В качестве сервера выступает HQ-RTR
   - На HQ-RTR настройте сервер chrony, выберите стратум 5
   - В качестве клиентов настройте HQ-SRV, HQ-CLI, BR-RTR, BR-SRV

4. **Сконфигурируйте ansible на сервере BR-SRV**

   - Сформируйте файл инвентаря, в инвентарь должны входить HQ-SRV, HQ-CLI, HQ-RTR и BR-RTR
   - Рабочий каталог ansible должен располагаться в /etc/ansible
   - Все указанные машины должны без предупреждений и ошибок отвечать pong на команду ping в ansible посланную с BR-SRV

5. **Развертывание приложений в Docker на сервере BR-SRV** - Создайте в домашней директории пользователя файл wiki.yml для приложения MediaWiki. - Средствами docker compose должен создаваться стек контейнеров с приложением MediaWiki и базой данных.
   Используйте два сервиса - Основной контейнер MediaWiki должен называться wiki и использовать образ mediawiki - Файл LocalSettings.php с корректными настройками должен находиться в домашней папке пользователя и автоматически монтироваться в образ. - Контейнер с базой данных должен называться mariadb и использовать образ mariadb. - Он должен создавать базу с названием mediawiki, доступную по стандартному порту, пользователя wiki с паролем WikiP@ssw0rd должен иметь права доступа к этой базе данных - MediaWiki должна быть доступна извне через порт 8080.

6. **На маршрутизаторах сконфигурируйте статическую трансляцию портов**

   - Пробросьте порт 80 в порт 8080 на BR-SRV на маршрутизаторе BR-RTR, для обеспечения работы сервиса wiki
   - Пробросьте порт 2024 в порт 2024 на HQ-SRV на маршрутизаторе HQ-RTR
   - Пробросьте порт 2024 в порт 2024 на BR-SRV на маршрутизаторе BR-RTR

7. **Запустите сервис moodle на сервере HQ-SRV**

   - Используйте веб-сервер apache
   - В качестве системы управления базами данных используйте mariadb
   - Создайте базу данных moodledb
   - Создайте пользователя moodle с паролем P@ssw0rd и предоставьте ему права доступа к этой базе данных
   - У пользователя admin в системе обучения задайте пароль P@ssw0rd
   - На главной странице должен отражаться номер рабочего места в виде арабской цифры, других подписей делать не надо
   - Основные параметры отметьте в отчёте

8. Настройте веб-сервер nginx как обратный прокси-сервер на HQ-RTR

   - При обращении к HQ-RTR по доменному имени moodle.au-team.irpo клиента должно перенаправлять на HQ-SRV на стандартный порт, на сервис moodle
   - При обращении к HQ-RTR по доменному имени wiki. au-team.irpo клиента должно перенаправлять на BR-SRV на порт, на сервис mediwiki

9. Удобным способом установите приложение Яндекс Браузере для организаций на HQ-CLI
   - Установку браузера отметьте в отчёте
